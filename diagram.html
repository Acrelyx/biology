<!-- diagram.html (Interactive Diagram Page) -->
<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css"> 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Diagram - Horseshoe Crab</title>
  <style>
    /* consistent with other pages */
        body {
      margin: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      background: linear-gradient(#eef2f3, #8e9eab);
      color: #333;
      overflow-x: hidden;
    }
    header {
      background: #2e4a62;
      color: #fff;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      animation: slideDown 1s ease;
    }
    nav {
      display: flex;
      justify-content: center;
      background: #3b5a72;
    }
    nav a {
      color: #fff;
      margin: 0.5rem 1rem;
      text-decoration: none;
      padding: 0.5rem;
      position: relative;
      transition: color 0.3s ease;
    }
    nav a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background: #fff;
      transition: width 0.3s ease;
    }
    nav a:hover::after { width: 100%; }
    nav a:hover { color: #ffdd57; }
    main { max-width: 960px; margin: 2rem auto; padding: 0 1rem; background: rgba(255,255,255,0.85); border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); animation: fadeIn 1.2s ease; }
    h2 { border-bottom: 2px solid #2e4a62; padding-bottom: 0.5rem; cursor: pointer; transition: color 0.3s ease; }
    h2:hover { color: #2e7d98; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    footer { text-align: center; padding: 1rem; background: #2e4a62; color: #fff; animation: slideUp 1s ease; }
    .diagram-container { position:relative; text-align:center; }
    .diagram-container img { max-width:100%; height:auto; display:block; margin:0 auto; }
    .hotspot { position:absolute; width:20px; height:20px; border-radius:50%; background:#ffdd57; cursor:pointer; transform:translate(-50%,-50%); }
    .popup {
      position:absolute;
      background:rgba(255,255,255,0.95);
      border:2px solid #2e4a62;
      border-radius:8px;
      padding:1rem;
      max-width:500px;
      opacity:0;
      transform:scale(0.8);
      transition: opacity 0.4s ease, transform 0.4s ease;
      pointer-events:none;
      z-index:10;
    }
    .popup.visible {
      opacity:1;
      transform:scale(1);
      pointer-events:auto;
    }
    .popup::after { content:''; position:absolute; width:0; height:0; border-style:solid; }
    #flip-btn {
      display:block;
      margin:1rem auto;
      padding:.5rem 1rem;
      background:#2e4a62;
      color:#fff;
      border:none;
      border-radius:4px;
      cursor:pointer;
      transition: background 0.3s ease;
    }
    #flip-btn:hover { background:#3b5a72; }
  </style>
</head>
<body>
  <header><h1><b>Interactive Diagram</b></h1></header>
  <nav>
    <a href="index.html">Home</a>
    <a href="overview.html">Overview</a>
    <a href="anatomy.html">Anatomy</a>
    <a href="exoskeleton.html">Exoskeleton</a>
    <a href="evolution.html">Evolution</a>
    <a href="model.html">3D Model</a>
    <a href="diagram.html">Diagram</a>
    <a href="quiz.html">Quiz</a>
  </nav>
  <main>
    <section>
      <h1 style="text-align: center;">Horseshoe Crab Anatomy Diagram</h1>
      <button id="flip-btn">Flip View</button>
      <div class="diagram-container">
        <img id="diagram" src="crab_top.jpg" alt="Horseshoe Crab Diagram" style="height: 550px; width: 350px;">
        <!-- Example hotspot -->
        <div class="hotspot bottomside" style="top:40%;left:57%;" data-popup="popup-pusher"></div>
        <div id="popup-pusher" class="popup" style="top:40%;left:57%;">
          <h3>Pusher Legs</h3>
          <p>Last pair of legs, used for locomotion and for digging in the sand.</p>
        </div>
        <div class="hotspot bottomside" style="top:43%;left:48%;" data-popup="popup-gills"></div>
        <div id="popup-gills" class="popup" style="top:43%;left:26%;">
          <h3 >Book Gills</h3>
          <p>Respiratory gas exchange, occasional swimming</p>
        </div>
        <div class="hotspot bottomside" style="top:30%;left:60%;" data-popup="popup-legs"></div>
        <div id="popup-legs" class="popup" style="top:30%;left:60%;">
          <h3 >Walking Legs</h3>
          <p>Regular leg pairs used in movement</p>
        </div>
        <div class="hotspot bottomside" style="top:20%;left:50%;" data-popup="popup-chelicerae"></div>
        <div id="popup-chelicerae" class="popup" style="top:20%;left:50%;">
          <h3 >Chelicerae</h3>
          <p>First pair of legs, used to place food in the mouth</p>
        </div>
        <div class="hotspot bottomside" style="top:25%;left:51%;" data-popup="popup-mouth"></div>
        <div id="popup-mouth" class="popup" style="top:25%;left:51%;">
          <h3 >Mouth</h3>
          <p>Uses gastric mill to grind and 'chew' the food into a goop more easily absorbed.</p>
        </div>
        <div class="hotspot bottomside" style="top:78%;left:50%;" data-popup="popup-telson"></div>
        <div id="popup-telson" class="popup" style="top:78%;left:50%;">
          <h3>Telson</h3>
          <p>The telson (tail) acts as a rudder, helping the horseshoe crab navigate and steer through the water. If a wave or predator flips a horseshoe crab onto its back, it uses its telson to flip itself back over. The telson can also be used to help the crab burrow into the sand</p>
        </div>

        <!-- TOP SIDE -->
        <div class="hotspot topside" style="top:23%;left:58%;" data-popup="popup-lateye"></div>
        <div id="popup-lateye" class="popup" style="top:23%;left:58%;">
          <h3 >Lateral Eye</h3>
          <p>Two large, prominent compound lateral eyes used for finding mates, especially during spawning season. These eyes are composed of approximately 1,000 individual ommatidia, each acting as a separate visual unit.</p>
        </div>
        <div class="hotspot topside" style="top:70%;left:50%;" data-popup="popup-array"></div>
        <div id="popup-array" class="popup" style="top:70%;left:50%;">
          <h3>Photoreceptor Array</h3>
          <p>A unique set of light-sensing organs, including a collection of photoreceptors located on the telson (tail). 
            These photoreceptors, while not fully understood, are believed to help synchronize the horseshoe crab's brain with light and dark cycles.</p>
        </div>
        <div class="hotspot topside" style="top:15%;left:50%;" data-popup="popup-median"></div>
        <div id="popup-median" class="popup" style="top:15%;left:50%;">
          <h3>Median Ocelli</h3>
          <p>A pair of simple eyes located on the top of their prosoma, near the front. These ocelli are sensitive to ultraviolet (UV) light and play a role in enhancing the sensitivity of the larger, compound lateral eyes, especially in low light conditions like during the night and on full moon nights.</p>
        </div>
        <div class="hotspot topside" style="top:16%;left:60%;" data-popup="popup-head"></div>
        <div id="popup-head" class="popup" style="top:16%;left:60%;">
          <h3>Head</h3>
          <p>Also called the prosoma, is a large, U-shaped structure that resembles a horseshoe. It's the frontmost part of the body and contains the brain, heart, eyes, mouth, and nervous system. The prosoma is covered by a hard exoskeleton made of chitin, which protects the vital organs within.</p>
        </div>
        <div class="hotspot topside" style="top:50%;left:55%;" data-popup="popup-abs"></div>
        <div id="popup-abs" class="popup" style="top:50%;left:55%;">
          <h3>Abdomen</h3>
          <p>The abdomen, or opisthosoma. It looks like a triangle with spines on the sides and a ridge in the center. The spines are movable and help protect the horseshoe crab. On the underside of the abdomen are muscles, used for movement, and gills for breathing.</p>
        </div>
      </div>
    </section>
  </main>
  <footer><p>&copy; 2025 Aaron Zhou IB Biology</p></footer>
  <script>
    let flipped = true;
    const flipBtn = document.getElementById('flip-btn');
    const img = document.getElementById('diagram');
    const topsideHotspots = document.querySelectorAll('.hotspot.topside');
    const bottomsideHotspots = document.querySelectorAll('.hotspot.bottomside');
    topsideHotspots.forEach(el => el.style.display = flipped ? 'none' : 'block');
    bottomsideHotspots.forEach(el => el.style.display = flipped ? 'block' : 'none');
    document.querySelectorAll('.popup').forEach(p => p.classList.remove('visible'));

    flipBtn.addEventListener('click', () => {
      flipped = !flipped;
      img.src = flipped ? 'crab_top.jpg' : 'crab_bottom.jpg';
      topsideHotspots.forEach(el => el.style.display = flipped ? 'none' : 'block');
      bottomsideHotspots.forEach(el => el.style.display = flipped ? 'block' : 'none');
      document.querySelectorAll('.popup').forEach(p => p.classList.remove('visible'));
    });

    document.querySelectorAll('.hotspot').forEach(el => {
      el.addEventListener('click', () => {
        const popup = document.getElementById(el.dataset.popup);
        popup.classList.toggle('visible');
      });
    });
  </script>
</body>
</html>

